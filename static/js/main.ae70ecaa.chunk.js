(this.webpackJsonptrek=this.webpackJsonptrek||[]).push([[0],[,,function(e,t,n){"use strict";var r={};n.r(r),n.d(r,"sum",(function(){return s})),n.d(r,"diff",(function(){return i})),n.d(r,"negate",(function(){return u})),n.d(r,"magnitude",(function(){return l})),n.d(r,"scale",(function(){return d})),n.d(r,"scaleXY",(function(){return f})),n.d(r,"dot",(function(){return p}));var a={};n.r(a),n.d(a,"sum",(function(){return y})),n.d(a,"diff",(function(){return m})),n.d(a,"negation",(function(){return g})),n.d(a,"magnitude",(function(){return h})),n.d(a,"scale",(function(){return b})),n.d(a,"dot",(function(){return v})),n.d(a,"distance",(function(){return O}));var o=n(1),c=n(3),s=function(e,t){return{x:e.x+t.x,y:e.y+t.y}},i=function(e,t){return s(e,u(t))},u=function(e){return{x:-1*e.x,y:-1*e.y}},l=function(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))},d=function(e,t){return{x:e.x*t,y:e.y*t}},f=function(e,t){return{x:e.x*t.x,y:e.y*t.y}},p=function(e,t){return e.x*t.x+e.y*t.y},y=function(e,t){var n=c.c(e),r=c.c(t);return c.d(s(n,r))},m=function(e,t){var n=c.c(e),r=c.c(t);return c.d(i(n,r))},g=function(e){throw new Error("not implemented")},h=function(e){return e.r},b=function(e,t){return Object(o.a)(Object(o.a)({},e),{},{r:e.r*t})},v=function(e,t){var n=c.c(e),r=c.c(t);return p(n,r)},O=function(e,t){var n=m(e,t).r;return Math.sign(n)*n},j={Polar:a,Rect:r};t.a=j},function(e,t,n){"use strict";n.d(t,"d",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return s}));var r=n(2),a=function(e){return{r:Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2)),theta:e.y>=0?Math.atan2(e.y,e.x):Math.atan2(e.y,e.x)+2*Math.PI}},o=function(e){return{x:e.r*Math.cos(e.theta),y:e.r*Math.sin(e.theta)}},c=function(e,t){var n=r.a.Rect.diff(e,{x:t.width/2,y:t.height/2});return n=r.a.Rect.scaleXY(n,{x:1/t.width*2,y:1/t.height*-2}),a(n)},s=function(e,t){var n=o(e);return n=r.a.Rect.scaleXY(n,{x:t.width/2,y:t.height/-2}),n=r.a.Rect.sum(n,{x:t.width/2,y:t.height/2})}},function(e,t,n){"use strict";var r=n(8);n.d(t,"getSectorContaining",(function(){return r.d}));n(3),n(9),n(5);var a=n(15);n.o(a,"longRangeScan")&&n.d(t,"longRangeScan",(function(){return a.longRangeScan})),n.o(a,"shortRangeScan")&&n.d(t,"shortRangeScan",(function(){return a.shortRangeScan})),n.o(a,"spritePropsFactory")&&n.d(t,"spritePropsFactory",(function(){return a.spritePropsFactory}));var o=n(16);n.d(t,"longRangeScan",(function(){return o.a})),n.d(t,"shortRangeScan",(function(){return o.b}));var c=n(17);n.d(t,"spritePropsFactory",(function(){return c.a}));n(7),n(2)},function(e,t,n){"use strict";var r={};n.r(r),n.d(r,"game",(function(){return d})),n.d(r,"sectors",(function(){return f})),n.d(r,"ship",(function(){return p})),n.d(r,"comms",(function(){return y})),n.d(r,"status",(function(){return m})),n.d(r,"damage",(function(){return g})),n.d(r,"sensors",(function(){return h})),n.d(r,"warp",(function(){return b})),n.d(r,"shields",(function(){return v})),n.d(r,"torpedos",(function(){return O})),n.d(r,"phasers",(function(){return j}));var a=n(8),o=function(){return{r:Math.random(),theta:2*Math.random()*Math.PI}},c=function(e){return Array.from(Array(e).keys())},s=function(e,t){return Math.floor(e+Math.random()*(t-e))},i=function(){return{type:"star",position:o()}},u=function(){return{type:"base",position:o()}},l=function(){return{name:"",type:"enemy",position:o(),shields:s(100,300),phaser:s(50,200)}},d=function(){return c(s(64,144)).map(i).concat(c(s(1,5)).map(u)).concat(c(s(7,28)).map(l))},f=function(){return Object(a.c)(a.b,a.a)},p=function(){return{type:"friendly",name:"",position:o()}},y=function(){return{log:[]}},m=function(){return{endDate:3e3+s(15,45),starDate:3e3,alert:"green"}},g=function(){return{srs:0,lrs:0,warp:0,shield:0,paaser:0,torpedo:0,damageControl:0,libraryComputer:0}},h=function(){return{selected:"srs",sector:{name:"",inner:{r:0,theta:0},outer:{r:0,theta:0}},sectors:f(),srs:[],lrs:[]}},b=function(){return{energy:3e3,heading:{r:0,theta:0}}},v=function(){return{energy:0}},O=function(){return{inventory:10,target:{r:0,theta:0}}},j=function(){return{energy:0}};t.a=r},,function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}));var r=function(e,t,n){return e<=t&&t<n},a=function(e,t,n){return t<e?e:t>n?n:t}},function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return s}));var r=n(9),a=["Aldebaran","Altair","Antares","Arcturus","Betelguse","Canapus","Capella","Deneb","Pollux","Procyon","Regulus","Rigel","Sagitarius","Sirus","Spica","Vega"],o=["I","II","III","IV"],c=function(e,t){var n=2*Math.PI/e.length;return e.map((function(e,r){return t.map((function(t,a){return{name:"".concat(e," ").concat(t),inner:{r:Math.sqrt(a/4),theta:r*n},outer:{r:Math.sqrt((a+1)/4),theta:(r+1)*n}}}))})).reduce((function(e,t){return e.concat(t)}),[])},s=function(e,t){var n=e.find((function(e){return r.a.Polar.contains(e,t.position)}));if(!n)throw new Error("obj is not contained in a sector");return n}},function(e,t,n){"use strict";var r={};n.r(r),n.d(r,"contains",(function(){return s})),n.d(r,"within",(function(){return i})),n.d(r,"distance",(function(){return u}));var a={};n.r(a),n.d(a,"contains",(function(){return l})),n.d(a,"distance",(function(){return d}));var o=n(7),c=n(2),s=function(e,t){return Object(o.a)(e.inner.r,t.r,e.outer.r)&&Object(o.a)(e.inner.theta,t.theta,e.outer.theta)},i=function(e,t){return u(e.center,t)<e.radius},u=function(e,t){return c.a.Polar.magnitude(c.a.Polar.diff(e,t))},l=function(e,t){return Object(o.a)(e.lowerLeft.x,t.x,e.upperRight.x)&&Object(o.a)(e.lowerLeft.y,t.y,e.upperRight.y)},d=function(e,t){return c.a.Rect.magnitude(c.a.Rect.diff(e,t))},f={Polar:r,Rect:a};t.a=f},,,,,,function(e,t){},function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return c}));n(1);var r=n(8),a=n(9),o=(n(2),function(e,t,n){var o=Object(r.d)(n,t);return e.filter((function(e){return a.a.Polar.contains(o,e.position)}))}),c=function(e,t,n){return e.filter((function(e){return a.a.Polar.within({center:t.position,radius:n},e.position)}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(1),a=n(2),o={srs:{friendly:{index:0,scale:.7,zIndex:2400},enemy:{index:1,scale:.5,zIndex:2300},base:{index:2,scale:.5,zIndex:2200},star:{index:3,scale:.3,zIndex:2100}},lrs:{friendly:{index:0,scale:.6,zIndex:2400},enemy:{index:1,scale:.4,zIndex:2300},base:{index:2,scale:.4,zIndex:2200},star:{index:3,scale:.2,zIndex:2100}}},c={srs:function(e,t){var n=s(e.sector);return[Object(r.a)(Object(r.a)(Object(r.a)({},o.srs.friendly),t),{},{position:n(t.position),data:t.position})].concat(e.srs.map((function(e){return Object(r.a)(Object(r.a)(Object(r.a)({},o.srs[e.type]),e),{},{position:n(e.position),data:e.position})})))},lrs:function(e,t){return[Object(r.a)(Object(r.a)({},o.lrs.friendly),{},{data:t.position},t)].concat(e.lrs.map((function(e){return Object(r.a)(Object(r.a)({},o.lrs[e.type]),e)})))}},s=function(e){var t=i(e),n=l(t,t);return function(a){return f(u(e),d(n,l(t,Object(r.a)({},a))))}},i=function(e){var t=e.inner,n=e.outer;return{r:(n.r-t.r)/2+t.r,theta:(n.theta-t.theta)/2+t.theta}},u=function(e){var t=e.inner;return e.outer.r-t.r},l=function(e,t){return Object(r.a)(Object(r.a)({},t),{},{theta:t.theta+2.5*Math.PI-e.theta-2*Math.PI})},d=function(e,t){return a.a.Polar.diff(t,e)},f=function(e,t){return Object(r.a)(Object(r.a)({},t),{},{r:2*t.r/e})}},,function(e,t,n){e.exports=n.p+"static/media/spritesheet.94c563f0.png"},function(e,t,n){e.exports=n(29)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(18),c=(n(25),n(26),n(27),n(28),n(2)),s=n(6),i=function(e){var t=e.children;return a.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"flex-end",marginBottom:"1.5rem"}},t)},u=function(e){e.title;var t=e.onChange,n=void 0===t?function(){}:t,r=Object(s.a)(e,["title","onChange"]);return a.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center"}},a.a.createElement("input",Object.assign({orient:"vertical",type:"range",onChange:function(e){return n(Number.parseFloat(e.target.value))}},r)))},l=function(e){var t=e.title,n=e.value,r=e.precision,o=void 0===r?0:r;Object(s.a)(e,["title","value","precision"]);return a.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between"}},a.a.createElement("p",{style:{margin:0}},t),a.a.createElement("p",{style:{margin:0}},"\xa0\xa0"),a.a.createElement("p",{style:{margin:0}},function(e,t){return"number"===typeof e?e.toFixed(t):e}(n,o)))},d=function(e){var t=e.title,n=e.value;Object(s.a)(e,["title","value"]);return a.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between"}},a.a.createElement("p",{style:{margin:0}},t),a.a.createElement("p",{style:{margin:0}},"\xa0\xa0"),a.a.createElement("p",{style:{margin:0,backgroundColor:n,height:"1.5rem",width:"4rem",border:"none",borderRadius:"16px 16px 16px 16px"}}))},f=n(1),p={title:{position:"absolute",right:"1rem",zIndex:1e3},subtitle:{position:"absolute",top:"90%",right:"1rem"},frame:{border:"1rem solid gray",borderRadius:"2rem",position:"relative"},justify:{center:{display:"flex",flexDirection:"row",justifyContent:"center"},left:{display:"flex",flexDirection:"row",justifyContent:"flex-start"}},top:{borderBottom:"none",borderRight:"none"},bottom:{borderTop:"none",borderRight:"none"},left:{borderRight:"none"},right:{borderLeft:"none"},bracket:{borderTop:"none",borderBottom:"none"},buttonBar:{display:"flex",flexDirection:"column",justifyContent:"flex-start",position:"absolute",left:0,top:25},button:{border:"none",borderRadius:"0px 16px 16px 0px",marginBottom:"16px",height:"2rem",width:"5rem",display:"block",cursor:"pointer",zIndex:2e3}},y=function(e){return e?Object(f.a)(Object(f.a)({},p.frame),p[e]):Object(f.a)(Object(f.a)({},p.frame),p.left)},m=function(e){var t=e.type,n=e.children,r=e.justify,o=void 0===r?"center":r,c=Object(s.a)(e,["type","children","justify"]);return a.a.createElement("div",Object.assign({style:Object(f.a)(Object(f.a)({},y(t)),p.justify[o])},c),n)},g=function(e){var t=e.title,n=Object(s.a)(e,["title"]);return a.a.createElement("div",Object.assign({style:p.title},n),t)},h=function(e){var t=e.children,n=Object(s.a)(e,["children"]);return a.a.createElement("div",Object.assign({style:p.buttonBar},n),t)},b=function(e){var t=e.onClick,n=e.text,r=Object(s.a)(e,["onClick","text"]);return a.a.createElement("button",Object.assign({onClick:t,style:p.button},r),n)},v=function(e){var t=e.text,n=Object(s.a)(e,["text"]);return a.a.createElement("div",Object.assign({style:p.subtitle},n),t)},O=n(5),j=n(10),E=n(7),x=function(e,t){switch(t.type){case"remove-item":return e.splice(e.indexOf(t.payload),1),Object(j.a)(e);default:return e}},w=function(e,t){switch(t.type){case"new-position":return Object(f.a)(Object(f.a)({},e),{},{position:t.payload});default:return e}},C=function(e,t){switch(t.type){case"set":return{log:t.payload};case"log-message":return{log:[t.payload].concat(Object(j.a)(e.log))};default:return e}},R=function(e,t){switch(t.type){case"repair-all":return{srs:0,lrs:0,warp:0,shield:0,paaser:0,torpedo:0,damageControl:0,libraryComputer:0};default:return e}},P=function(e,t){switch(t.type){case"new-heading":return Object(f.a)(Object(f.a)({},e),{},{heading:t.payload});case"store-energy":return Object(f.a)(Object(f.a)({},e),{},{energy:t.payload});default:return e}},S=function(e,t){switch(t.type){case"store-energy":return Object(f.a)(Object(f.a)({},e),{},{energy:t.payload});default:return e}},k=function(e,t){switch(t.type){case"set-target":return Object(f.a)(Object(f.a)({},e),{},{target:t.payload});case"dec-inventory":return Object(f.a)(Object(f.a)({},e),{},{inventory:e.inventory>0?e.inventory-1:e.inventory});case"set-inventory":return Object(f.a)(Object(f.a)({},e),{},{inventory:t.payload});case"clear-target":return Object(f.a)(Object(f.a)({},e),{},{target:{r:0,theta:0}});default:return e}},I=function(e,t){switch(t.type){case"store-energy":return Object(f.a)(Object(f.a)({},e),{},{energy:t.payload});case"deplete-energy":return Object(f.a)(Object(f.a)({},e),{},{energy:Object(E.b)(0,e.energy-t.payload,e.energy)});default:return e}},M=n(4),D=function(e,t){switch(t.type){case"store-sector":return Object(f.a)(Object(f.a)({},e),{},{sector:t.payload});case"srs-scan":var n=t.payload,r=n.game,a=n.ship,o=Object(M.shortRangeScan)(r,a,e.sectors);return Object(f.a)(Object(f.a)({},e),{},{srs:o,selected:"srs"});case"lrs-scan":var c=t.payload,s=c.game,i=c.ship,u=Object(M.longRangeScan)(s,i,.3),l=new Set(e.lrs.concat(u));return Object(f.a)(Object(f.a)({},e),{},{lrs:Array.from(l.values()),selected:"lrs"});case"remove-item":var d=Object(j.a)(e.srs),p=Object(j.a)(e.lrs);return d.splice(d.indexOf(t.payload),1),p.splice(p.indexOf(t.payload),1),Object(f.a)(Object(f.a)({},e),{},{srs:d,lrs:p});default:return e}},T=function(e,t){switch(t.type){case"inc-stardate":return Object(f.a)(Object(f.a)({},e),{},{starDate:e.starDate+10*t.payload});case"set-alert":return Object(f.a)(Object(f.a)({},e),{},{alert:t.payload});default:return e}},F=Object(r.createContext)(),z=function(e){return Object(r.useContext)(F)[e][0]},N=function(){return z("game")},B=function(){return z("ship")},K=function(){return z("sensors")},A=function(){return z("warp")},H=function(){var e=Object(r.useContext)(F);return function(t){var n=t.sys,r=t.type,a=t.payload;return e[n][1]({type:r,payload:a})}},V=function(e){var t=e.children,n={game:Object(r.useReducer)(x,O.a.game()),ship:Object(r.useReducer)(w,O.a.ship()),comms:Object(r.useReducer)(C,O.a.comms()),damage:Object(r.useReducer)(R,O.a.damage()),status:Object(r.useReducer)(T,O.a.status()),sensors:Object(r.useReducer)(D,O.a.sensors()),warp:Object(r.useReducer)(P,O.a.warp()),shields:Object(r.useReducer)(S,O.a.shields()),torpedos:Object(r.useReducer)(k,O.a.torpedos()),phasers:Object(r.useReducer)(I,O.a.phasers())};return a.a.createElement(F.Provider,{value:n},t)},L=function(e){var t=K(),n=z("phasers"),o=A(),s=B(),d=H();return a.a.createElement(r.Fragment,null,a.a.createElement(h,null,a.a.createElement(b,{className:"lcars-tamarillo-bg",text:"Fire",disabled:"srs"!==t.selected,onClick:function(e){t.srs.filter((function(e){return"enemy"===e.type})).forEach((function(e){var t=n.energy/c.a.Polar.distance(e.position,s.position)*.1;d({sys:"comms",type:"log-message",payload:"SPOCK: ".concat(t.toFixed(2)," unit hit on target vessel.")}),d({sys:"phasers",type:"deplete-energy",payload:t}),t>.15*e.shields&&(e.shields-=t),e.shields<=0?(d({sys:"game",type:"remove-item",payload:e}),d({sys:"sensors",type:"remove-item",payload:e}),d({sys:"comms",type:"log-message",payload:"CHEKOV: Enemy wessel destroyed."})):d({sys:"comms",type:"log-message",payload:"SPOCK: Target shields are at ".concat(e.shields.toFixed(0),".")})}))}})),a.a.createElement(i,null,a.a.createElement(u,{min:0,max:500,value:n.energy,onInput:function(e){var t=Number.parseFloat(e.target.value),r=o.energy+n.energy;t<=r&&(d({sys:"warp",type:"store-energy",payload:r-=t}),d({sys:"phasers",type:"store-energy",payload:t}))}}),a.a.createElement(l,{title:"Energy",value:n.energy})))},W=function(e){var t=z("shields"),n=A(),o=H();return a.a.createElement(r.Fragment,null,a.a.createElement(i,null,a.a.createElement(u,{min:0,max:500,value:t.energy,onInput:function(e){var r=Number.parseFloat(e.target.value),a=n.energy+t.energy;r<=a&&(o({sys:"warp",type:"store-energy",payload:a-=r}),o({sys:"shields",type:"store-energy",payload:r}))}}),a.a.createElement(l,{title:"Energy",value:t.energy})))},Y=n(12),q=function(e){var t=H(),n=z("torpedos"),o=K(),s=B(),u=Object(r.useState)({r:0,theta:0}),d=Object(Y.a)(u,2),f=d[0],p=d[1];Object(r.useEffect)((function(){0===n.target.r&&0===n.target.theta?p({r:0,theta:0}):p(c.a.Polar.diff(s.position,n.target))}),[n.target,s.position]);return a.a.createElement(r.Fragment,null,a.a.createElement(h,null,a.a.createElement(b,{className:"lcars-tamarillo-bg",text:"Launch",disabled:"srs"!==o.selected,onClick:function(e){if(n.inventory>0){var r=o.srs.find((function(e){return n.target.r===e.position.r&&n.target.theta===e.position.theta}));switch(t({sys:"torpedos",type:"dec-inventory",payload:""}),t({sys:"torpedos",type:"clear-target",payload:""}),r.type){case"base":t({sys:"game",type:"remove-item",payload:r}),t({sys:"sensors",type:"remove-item",payload:r}),t({sys:"comms",type:"log-message",payload:"CHEKOV: Direct hit on the starbase!"});break;case"enemy":t({sys:"game",type:"remove-item",payload:r}),t({sys:"sensors",type:"remove-item",payload:r}),t({sys:"comms",type:"log-message",payload:"CHEKOV: Enemy wessel destroyed."});break;case"star":t({sys:"comms",type:"log-message",payload:"CHEKOV: The star absorbed the energy of the torpedo."})}}else t({sys:"comms",type:"log-message",payload:"CHEKOV: We have no torpedos left!"})}})),a.a.createElement(i,null,a.a.createElement(l,{title:"Inventory",value:n.inventory}),a.a.createElement(l,{title:"Range",value:f.r,precision:3}),a.a.createElement(l,{title:"Bearing",value:f.theta,precision:3})))},X=function(e){var t=N(),n=B(),o=H();return Object(r.useEffect)((function(){o({sys:"sensors",type:"srs-scan",payload:{game:t,ship:n}})}),[]),a.a.createElement("div",{className:"bridge"},a.a.createElement(m,{className:"comms lcars-atomic-tangerine-border",type:"bottom",justify:"left"},a.a.createElement(g,{title:"Comms"}),a.a.createElement(Q,null)),a.a.createElement(m,{className:"status lcars-atomic-tangerine-border",type:"bottom",justify:"left"},a.a.createElement(g,{title:"Status"}),a.a.createElement(le,null)),a.a.createElement(m,{className:"sensors lcars-atomic-tangerine-border",type:"bracket"},a.a.createElement(g,{title:"Sciences"}),a.a.createElement(ue,null)),a.a.createElement(m,{className:"shields lcars-atomic-tangerine-border",type:"left"},a.a.createElement(g,{title:"Shields"}),a.a.createElement(W,null)),a.a.createElement(m,{className:"warp lcars-atomic-tangerine-border",type:"left"},a.a.createElement(g,{title:"Warp Drive"}),a.a.createElement(de,null)),a.a.createElement(m,{className:"phasers lcars-atomic-tangerine-border",type:"top"},a.a.createElement(g,{title:"Phasers"}),a.a.createElement(L,null)),a.a.createElement(m,{className:"torpedos lcars-atomic-tangerine-border",type:"top"},a.a.createElement(g,{title:"Photon Torpedos"}),a.a.createElement(q,null)))},U=a.a.createContext({width:300,height:150}),J=function(e){var t=e.height,n=e.width,r=e.init,o=void 0===r?function(){}:r,c=e.children;return a.a.createElement(U.Provider,{value:{height:t,width:n,init:o}},a.a.createElement("div",{style:{position:"relative",height:t,width:n}},c))},$=function(e){var t=e.draw,n=e.polar,o=void 0!==n&&n,c=e.onClick,s=void 0===c?function(){}:c,i=a.a.createRef();return Object(r.useEffect)((function(){var e=i.current.getContext("2d");o&&e.translate(e.canvas.width/2,e.canvas.height/2),t(e)}),[]),a.a.createElement(U.Consumer,null,(function(e){var t=e.height,n=e.width;return a.a.createElement("canvas",{style:{position:"absolute",top:0,left:0},height:t,width:n,ref:i,onClick:s})}))},G=Object.values({paleCanary:"#ff9",goldenTanoi:"#fc6",neonCarrot:"#f93",eggplant:"#646",lilac:"#c9c",anakiwa:"#9cf",mariner:"#36c",bahamaBlue:"#069",blueBell:"#99c",melrose:"#99f",hopBush:"#c69",chestnutRose:"#c66",orangePeel:"#f96",atomicTangerine:"#f90",danub:"#68c",indigo:"#45b",lavenderPurple:"#97a",cosmic:"#746",redDamask:"#d64",mediumCarmine:"#a53",bourbon:"#b62",sandyBrown:"#e95",husk:"#ba5",rust:"#b41",tamarillo:"#821"}),Q=function(e){var t=z("comms");return a.a.createElement("div",{style:{marginLeft:"1rem",display:"flex",flexDirection:"column-reverse",marginTop:"1rem",overflow:"hidden"}},t.log.map((function(e){return a.a.createElement("div",null,e)})))},Z=function(e){var t=e.children,n=B(),o=N(),c=K(),s=H();return Object(r.useEffect)((function(){var e=Object(M.getSectorContaining)(c.sectors,n);s({sys:"sensors",type:"store-sector",payload:e})}),[n.position]),Object(r.useEffect)((function(){Object(M.shortRangeScan)(o,n,c.sectors).filter((function(e){return"base"===e.type})).length>0&&(s({sys:"comms",type:"log-message",payload:"UHURU: Starbase reports refitting complete."}),s({sys:"damage",type:"repair-all"}),s({sys:"torpedos",type:"set-inventory",payload:10}),s({sys:"warp",type:"store-energy",payload:3e3}))}),[c.sector]),Object(r.useEffect)((function(){Object(M.shortRangeScan)(o,n,c.sectors).filter((function(e){return"enemy"===e.type})).length>0&&(s({sys:"comms",type:"log-message",payload:"CHEKOV: Enemy wessels detected."}),s({sys:"status",type:"set-alert",payload:"red"}))}),[c.sector]),Object(r.useEffect)((function(){0===Object(M.shortRangeScan)(o,n,c.sectors).filter((function(e){return"enemy"===e.type})).length&&s({sys:"status",type:"set-alert",payload:"green"})}),[c.srs]),Object(r.useEffect)((function(){["SPOCK: Captain on deck.","SCOTT: The warp core is'a not feeling well!","MCCOY: Spock, you green-blooded, pointy-eared...","SPOCK: Doctor McCoy, I raise my eybrows at you.","SCOTT: Is'a no one listening? The warp core is aboot to breach!","MCCOY: Damn it, Scotty! I'm a doctor, not an engineer!"].forEach((function(e,t){return setTimeout((function(){return s({sys:"comms",type:"log-message",payload:e})}),2e3*t)}))}),[]),a.a.createElement(r.Fragment,null,t)},_=n(19),ee=n.n(_),te={lrs:function(e){var t=2*Math.PI/16;e.strokeStyle="none";for(var n=0;n<16;n++){var r=G[n%16];e.moveTo(0,0),e.beginPath(),e.arc(0,0,e.canvas.width/2,n*t,(n+1)*t),e.lineTo(0,0),e.fillStyle=r+"c",e.fill()}e.strokeStyle="lightgray";for(var a=1;a<=4;a++){var o=e.canvas.width/2*Math.sqrt(a/4);e.beginPath(),e.arc(0,0,o,0,2*Math.PI),e.closePath(),e.stroke()}},srs:function(e){e.strokeStyle="lightgray";for(var t=1;t<=4;t++)e.beginPath(),e.arc(0,0,e.canvas.width*t*.125,0,2*Math.PI),e.closePath(),e.stroke()}},ne=function(e){var t=e.children,n=e.draw,o=e.onclick;return a.a.createElement(r.Fragment,null,a.a.createElement($,{draw:n,polar:!0,onClick:o}),a.a.createElement(se,{src:ee.a,size:50},t))},re=function(e){return a.a.createElement(ne,Object.assign({},e,{draw:te.srs}))},ae=function(e){return a.a.createElement(ne,Object.assign({},e,{draw:te.lrs}))},oe=n(3),ce=Object(r.createContext)(null),se=function(e){var t=e.src,n=e.size,o=void 0===n?50:n,c=e.children,s=Object(r.useState)(new Image),i=Object(Y.a)(s,2),u=i[0],l=i[1];return Object(r.useEffect)((function(){var e;(e=t,new Promise((function(t,n){var r=new Image;r.onload=function(){return t(r)},r.onerror=n,r.src=e}))).then(l)}),[t]),a.a.createElement(ce.Provider,{value:{sprites:u,size:o}},c)},ie=function(e){var t=e.name,n=void 0===t?"[...]":t,o=e.position,s=e.scale,i=void 0===s?1:s,u=e.index,l=void 0===u?0:u,d=e.zIndex,p=void 0===d?2e3:d,y=e.data,m=void 0===y?null:y,g=e.onclick,h=void 0===g?void 0:g,b=a.a.createRef(),v=a.a.useContext(U),O=a.a.useContext(ce),j=Object(r.useState)({top:0,left:0}),E=Object(Y.a)(j,2),x=E[0],w=E[1],C=i*O.size;Object(r.useEffect)((function(){var e=function(e,t,n,r){var a=n/t,o=e%(r/t);return{x:o*t,y:Math.floor((e-o)/a)*t}}(l,O.size,O.sprites.width,O.sprites.height),t=e.x,n=e.y;b.current.getContext("2d").drawImage(O.sprites,t,n,O.size,O.size,0,0,C,C),w(function(e,t,n){var r=oe.b(e,t);return{top:(r=c.a.Rect.diff(r,{x:n/2,y:n/2})).y,left:r.x}}(o,v,C))}),[O,o,i,l,p]);return a.a.createElement("canvas",{style:Object(f.a)(Object(f.a)({position:"absolute"},x),{},{zIndex:p}),height:C,width:C,title:n,onClick:function(){h&&h(m)},ref:b})},ue=function(e){var t=K(),n=N(),o=B(),s=H();return a.a.createElement(r.Fragment,null,a.a.createElement(v,{text:t.sector.name}),a.a.createElement(h,null,a.a.createElement(b,{onClick:function(){return s(function(e,t,n){return{sys:"sensors",type:"srs-scan",payload:{game:e,ship:t,sensors:n}}}(n,o,t))},className:"lcars-hopbush-bg",text:"SRS"}),a.a.createElement(b,{onClick:function(){return s(function(e,t){return{sys:"sensors",type:"lrs-scan",payload:{game:e,ship:t}}}(n,o))},className:"lcars-hopbush-bg",text:"LRS"})),a.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center"}},a.a.createElement(J,{height:450,width:450},"srs"===t.selected?a.a.createElement(re,null,M.spritePropsFactory.srs(t,o).map((function(e){return a.a.createElement(ie,Object.assign({},e,{onclick:function(e){return s(function(e){return{sys:"torpedos",type:"set-target",payload:e}}(e))}}))}))):a.a.createElement(ae,{onclick:function(e){return s(function(e,t){var n=e.currentTarget.getBoundingClientRect(),r={x:e.clientX-n.left,y:e.clientY-n.top},a=oe.a(r,n);return{sys:"warp",type:"new-heading",payload:c.a.Polar.diff(a,t)}}(e,o.position))}},M.spritePropsFactory.lrs(t,o).map((function(e){return a.a.createElement(ie,e)}))))))},le=function(e){var t=z("status");return a.a.createElement("div",{style:{marginLeft:"1rem",display:"flex",flexDirection:"column",flexWrap:"wrap",alignContent:"space-between",marginTop:"1rem"}},a.a.createElement(l,{title:"Star Date",value:t.starDate,precision:1}),a.a.createElement(l,{title:"Mission Date",value:t.endDate,precision:1}),a.a.createElement(d,{title:"Tactical",value:t.alert}))},de=function(e){var t=K(),n=B(),o=A(),s=H();return a.a.createElement(r.Fragment,null,a.a.createElement(h,null,a.a.createElement(b,{className:"lcars-dodger-blue-bg",text:"Engage",onClick:function(){var e=1e3*o.heading.r;if(o.energy>=e){var r=c.a.Polar.sum(n.position,o.heading),a=Object(M.getSectorContaining)(t.sectors,Object(f.a)(Object(f.a)({},n),{},{position:r}));s({sys:"ship",type:"new-position",payload:r}),s({sys:"sensors",type:"store-sector",payload:a}),s({sys:"warp",type:"store-energy",payload:o.energy-e}),s({sys:"status",type:"inc-stardate",payload:o.heading.r})}else s({sys:"comms",type:"log-message",payload:"SCOTT: We do'na have the energy for this manuever."})},disabled:"srs"===t.selected})),a.a.createElement(i,null,a.a.createElement(l,{title:"Energy",value:o.energy}),a.a.createElement(l,{title:"Warp Factor",value:o.heading.r,precision:3}),a.a.createElement(l,{title:"Heading",value:o.heading.theta,precision:3})))};var fe=function(){return a.a.createElement("div",{className:"App"},a.a.createElement(V,null,a.a.createElement(Z,null,a.a.createElement(X,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.render(r.createElement(fe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[20,1,2]]]);
//# sourceMappingURL=main.ae70ecaa.chunk.js.map